{"version":3,"sources":["../src/index.js"],"names":["reporter","context","Syntax","RuleError","report","fixer","getSource","helper","RuleHelper","Str","node","isChildNode","Link","Image","BlockQuote","Emphasis","text","matchAfter","forEach","match","index","fix","replaceTextRange","module","exports","linter"],"mappings":"AAAA;AACA;AACA;;;;;;AAKA;;AACA;;AACA,SAASA,QAAT,CAAkBC,OAAlB,EAA2B;AACvB,MAAM;AAACC,IAAAA,MAAD;AAASC,IAAAA,SAAT;AAAoBC,IAAAA,MAApB;AAA4BC,IAAAA,KAA5B;AAAmCC,IAAAA;AAAnC,MAAgDL,OAAtD;AACA,MAAMM,MAAM,GAAG,IAAIC,8BAAJ,EAAf;AACA,SAAO;AACH,KAACN,MAAM,CAACO,GAAR,EAAaC,IAAb,EAAkB;AACd,UAAIH,MAAM,CAACI,WAAP,CAAmBD,IAAnB,EAAyB,CAACR,MAAM,CAACU,IAAR,EAAc,eAAd,EAA+BV,MAAM,CAACW,KAAtC,EAA6CX,MAAM,CAACY,UAApD,EAAgEZ,MAAM,CAACa,QAAvE,CAAzB,CAAJ,EAAgH;AAC5G;AACH;;AACD,UAAIC,IAAI,GAAGV,SAAS,CAACI,IAAD,CAApB,CAJc,CAKd;AACA;;AACA,UAAMO,UAAU,GAAG,WAAnB;AACA,4CAAqBD,IAArB,EAA2BC,UAA3B,EAAuCC,OAAvC,CAA+CC,KAAK,IAAI;AACpD,YAAM;AAACC,UAAAA;AAAD,YAAUD,KAAhB;AACA,eAAOf,MAAM,CAACM,IAAD,EAAO,IAAIP,SAAJ,CAAc,yCAAd,EAAyD;AACzEiB,UAAAA,KAAK,EAAEA,KADkE;AAEzEC,UAAAA,GAAG,EAAEhB,KAAK,CAACiB,gBAAN,CAAuB,CAACF,KAAD,EAAQA,KAAK,GAAG,CAAhB,CAAvB,EAA2C,GAA3C;AAFoE,SAAzD,CAAP,CAAb;AAIH,OAND;AAOH;;AAhBE,GAAP;AAkBH;;AACDG,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,MAAM,EAAEzB,QADK;AAEbK,EAAAA,KAAK,EAAEL;AAFM,CAAjB","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n/*\n 感嘆符(!)\n 文末に感嘆符を使用し、後に別の文が続く場合は、直後に全角スペースを挿入します。\n 文中に感嘆符を使用する場合はスペースを挿入しません。\n */\nimport {RuleHelper} from \"textlint-rule-helper\";\nimport {matchCaptureGroupAll} from \"match-index\";\nfunction reporter(context) {\n    const {Syntax, RuleError, report, fixer, getSource} = context;\n    const helper = new RuleHelper();\n    return {\n        [Syntax.Str](node){\n            if (helper.isChildNode(node, [Syntax.Link, \"LinkReference\", Syntax.Image, Syntax.BlockQuote, Syntax.Emphasis])) {\n                return;\n            }\n            let text = getSource(node);\n            // ！の後ろは全角スペースが推奨\n            // 半角スペースである場合\n            const matchAfter = /！( )[^\\n]/;\n            matchCaptureGroupAll(text, matchAfter).forEach(match => {\n                const {index} = match;\n                return report(node, new RuleError(\"文末に感嘆符を使用し、後に別の文が続く場合は、直後に全角スペースを挿入します。\", {\n                    index: index,\n                    fix: fixer.replaceTextRange([index, index + 1], \"　\")\n                }));\n            });\n        }\n    };\n}\nmodule.exports = {\n    linter: reporter,\n    fixer: reporter\n};\n"],"file":"index.js"}